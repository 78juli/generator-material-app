<md-sidenav<%if (features.auth) {%> ng-show="app.isLoggedIn()"<% } %>
	md-is-locked-open="$mdMedia('gt-lg')"
	md-component-id="mainMenu"
	class="md-sidenav-left md-whiteframe-z2"
	layout="column">

	<md-toolbar class="md-tall md-whiteframe-z1">
		<span class="md-toolbar-tools md-toolbar-tools-top" layout="column">
			<h2 class="md-headline"><%= appname %> Menu</h2>
		</span>
	</md-toolbar>

	<md-content flex ng-controller="MainMenuController as menu"><% if (features.auth) { %>

		<md-list>
			<md-item>
				<md-button ng-click="menu.logout()">
					<md-icon md-svg-icon="navigation:ic_cancel_24px"></md-icon>
					<span class="md-body-2">Logout</span>
				</md-button>
			</md-item>
			<md-divider></md-divider>
		</md-list><% } %>

		<md-list ng-repeat="item in menu.items"<% if (features.auth) { %> ng-show="menu.canAccess(item)"<% } %> >

			<md-item layout="row" layout-align="start center">
				<md-button ng-class="{'md-primary': menu.isActive(item)}" ng-click="menu.navigateTo(item)">
					<md-icon ng-class="{'md-primary': menu.isActive(item)}" md-svg-icon="{{item.icon}}"></md-icon>
					<span class="md-body-2">{{item.name}}</span>
				</md-button>
			</md-item>

			<md-item layout="row" layout-align="start center" ng-repeat="subItem in item.subItems"<% if (features.auth) { %> ng-show="menu.canAccess(subItem)"<% } %>>
				<md-button ng-class="{'md-primary': menu.isActive(subItem)}" ng-click="menu.navigateTo(subItem)">
					<md-icon ng-class="{'md-primary': menu.isActive(subItem)}" md-svg-icon="{{subItem.icon}}"></md-icon>
					<span class="md-body-2">{{subItem.name}}</span>
				</md-button>
			</md-item>

			<md-divider ng-if="!$last"></md-divider>

		</md-list>

	</md-content>

</md-sidenav>
